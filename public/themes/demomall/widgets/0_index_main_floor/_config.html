<style type="text/css">
  .index-goods-config{background:#333333;border-collapse:separate;border-spacing:1px;}
  .index-goods-config td{background:#FFFFFF;}
  .choose-format {
    margin-bottom: 15px;
  }
  .choose-format label {
    font-size: 14px;
    margin-right: 10px;
  }
  .floor-format {
    float: left;
    width: 282px;
    margin: 5px 10px;
  }
  .floor-format h3 {
    font-size: 12px;
    margin-top: 20px;
    margin-bottom: 10px;
    color: #999;
  }
  .floor-format .thumbnail img {
    width: 100%;
  }
  .floor-content {
    margin-left: 300px;
    overflow: auto;
    height: 420px;
  }
  .floor-module > div {
    float: left;
  }
  .floor-module .left {
    margin-right: 1px;
  }
  .floor-module .left div {
    width: 50px;
    height: 54px;
    background: #ddd;
    margin-bottom: 1px;
  }
  .floor-module .left div:first-child {
    height: 46px;
  }
  .floor-module .center {
    width: 73px;
    height: 101px;
    background: #ddd;
    margin-right: 1px;
  }
  .floor-module.floor-module-01 .right {
    width: 157px;
  }
  .floor-module.floor-module-02 .right {
    width: 230px;
  }
  .floor-module .right .area {
    float: left;
    margin-right: 1px;
  }
  .floor-module .right .area div {
    width: 50px;
    height: 50px;
    background: #ddd;
    margin-bottom: 1px;
  }
  .floor-module .right .area.big div {
    height: 101px;
  }
  .floor-module.floor-module-01 .top div, .floor-module.floor-module-01 .foot div{
    width: 51px;
  }
  .floor-module.floor-module-02 .top div, .floor-module.floor-module-02 .foot div{
    width: 51px;
  }
  .floor-module .top div:last-child, .floor-module .foot div:last-child {
    margin-right: 0;
  }
  .floor-module.floor-module-02 .top div:first-child {
    width: 125px;
  }
  .floor-module.floor-module-02 .foot div:first-child {
    width: 73px;
  }
  .floor-module .top div {
    height: 75px;
    margin-bottom: 1px
  }
  .floor-module .foot div {
    height: 45px;
  }
  .clear {
    clear: both;
  }
  .red{ color:red;}
  #featured tbody {
    border-top: 1px solid #dfdfdf;
  }
</style>
<div class="widgetconfig" >
  <div class="tableform">
    <table width="100%">
      <tr>
        <th><span class="red">*</span> 请先选择一个 分类：</th>
        <td>
			<select name="first_cat_id" id="first_cat">
				<option value="">请选择</option>
				<{foreach item=cat from=$setting.first_cat_list}>
				<option value="<{$cat.cat_id}>" <{if $setting.first_cat_id == $cat.cat_id}> selected="selected"<{/if}>><{$cat.cat_name}></option>
				<{/foreach}>
			</select>
			<input type="hidden" name="first_cat_name" value="<{$setting.first_cat_name}>" />
		</td>
      </tr>
      <tr>
		<th> 自定义楼层：</th>
        <td><input type="text" name="floor_th" value="<{$setting.floor_th}>" style="width:50px; text-align:center;" />F</td>
      </tr>
      <tr>
        <th>更多链接：</th>
        <td><input type="text" name="floor_more" value="<{$setting.floor_more}>" style="width:200px;"/></td>
      </tr>
      <tr>
		<th> 自定义楼层名称（可选）：</th>
        <td><input type="text" name="floor_name" value="<{$setting.floor_name}>" style="width:200px;" /></td>
      </tr>
      <tr>
        <th>英文说明：</th>
        <td><input type="text" name="floor_en_name" value="<{$setting.floor_en_name}>" style="width:200px;"/></td>
      </tr>
    </table>
  </div>
  <div class="floor-format">
    <div class="tab-con">
      <h3>楼层区域示意图</h3>
      <div class="floor-module floor-module-01">
        <div class="left">
          <div class="select-area star-area"></div>
          <div class="select-area slider-area"></div>
        </div>
        <div class="center select-area featured-area-01">
        </div>
        <div class="right">
          <div class="area" style="float:none">
            <div class="featured-area-05 select-area" style="width:101px; margin-right:1px;     margin-left:1px; float:left"></div>
            <div class="featured-area-06 select-area" style="width:50px; float:left"></div>
          </div>
          <div class="area" style="float:none">
            <div class="featured-area-07 select-area" style="width:50px; margin-right:1px; margin-left:1px; float:left"></div>
            <div class="featured-area-08 select-area" style="width:50px; margin-right:1px; float:left"></div>
			<div class="featured-area-09 select-area" style="width:50px; float:left"></div>
          </div>
        </div>
      </div>
      </div>
  </div>
  <div class="floor-content">
    <div class="tableform" id="star">
      <h5>二级分类</h5>
      <table width="100%">
		<{foreach item=sec_cat from=$setting.second_cat_list key=key}>
        <tr sec_cat_id="<{$key}>" <{if $key != $setting.first_cat_id}>style="display:none;"<{/if}>>
			<td>
			<a href="javascript:void(0);" onclick="return checkAll(this);">全选</a>
			<{foreach item=sec from=$sec_cat}>
			<input type="checkbox" name="sec_cat[]" value="<{$sec.cat_name}>" <{if in_array($sec.cat_name, $setting.sec_cat)}> checked="checked"<{/if}> /> <{$sec.cat_name}>
			<{/foreach}>
		  </td>
        </tr>
		<{/foreach}>
      </table>
    </div>
    <div class="tableform" id="picAddress">
      <h5>热门品牌</h5>
        <div class="slider-type-con "<{if $setting.slider_type}>style="display: none;"<{/if}>>
          <table  width="100%" cellpadding="0" cellspacing="0">
            <tr>
              <th></th>
              <td><{input type="object" object="brand" app="syscategory" select=checkbox multiple="true" value=$setting.brand textcol="brand_name" name="brand" breakpoint=1}></td>
            </tr>
          </table>
        </div>
    </div>
    <div class="tableform" id="m_add">
      <h5>楼层主推中间广告图</h5>
      <table width="100%">
        <tbody id="featured-01">
          <tr>
            <th><{t app='topc'}>图片：<{/t}></th>
            <td>
              <input type="text" name='mid_pic' id="mid_pic" value="<{$setting.mid_pic}>" class="x-input">
              <input type=button value="<{t app='topc'}>上传图片<{/t}>" class="uploadbtn" onclick="addPic('mid_pic')"><span>（建议图片尺寸：376px * 421px）</span>
            </td>
          </tr>
          <tr>
            <th><{t app='topc'}>图片链接：<{/t}></th>
            <td><input type="text" name="mid_pic_link" value="<{$setting.mid_pic_link}>" class="x-input"></td>
          </tr>
          <tr>
            <th><{t app='topc'}>图片描述1：<{/t}></th>
            <td><input type="text" name="mid_pic_txt1" value="<{$setting.mid_pic_txt1}>" class="x-input"></td>
          </tr>
		  <tr>
            <th><{t app='topc'}>图片描述2：<{/t}></th>
            <td><input type="text" name="mid_pic_txt2" value="<{$setting.mid_pic_txt2}>" class="x-input"></td>
          </tr>

        </tbody>
	  </table>
	</div>
	<div class="tableform" id="featured">
      <h5>楼层主推列表</h5>
	  <table width="100%">
        <tbody a=5>
          <tr>
            <th><{t app='topc'}>图片：<{/t}></th>
            <td>
              <input type="text" name='big_pic2' id="big_pic2" value="<{$setting.big_pic2}>" class="x-input"><input type=button value="<{t app='topc'}>上传图片<{/t}>" class="uploadbtn" onclick="addPic('big_pic2')"><span>（建议图片尺寸：199px * 210px）</span>
            </td>
          </tr>
          <tr>
            <th><{t app='topc'}>商品名称：<{/t}></th>
            <td><input type="text" name="big_pic2_txt" value="<{$setting.big_pic2_txt}>" class="x-input"></td>
          </tr>
		  <tr>
            <th><{t app='topc'}>商品价格：<{/t}></th>
            <td><input type="text" name="big_pic2_money" value="<{$setting.big_pic2_money}>" class="x-input"></td>
          </tr>
          <tr>
            <th><{t app='topc'}>链接：<{/t}></th>
            <td><input type="text" name="big_pic2_link" value="<{$setting.big_pic2_link}>" class="x-input"></td>
          </tr>
        </tbody>

		<tbody a=6>
          <tr>
            <th><{t app='topc'}>图片：<{/t}></th>
            <td>
              <input type="text" name='small_pic2' id="small_pic2" value="<{$setting.small_pic2}>" class="x-input"><input type=button value="<{t app='topc'}>上传图片<{/t}>" class="uploadbtn" onclick="addPic('small_pic2')"><span>（建议图片尺寸：199px * 210px）</span>
            </td>
          </tr>
          <tr>
            <th><{t app='topc'}>图片名称：<{/t}></th>
            <td><input type="text" name="small_pic2_txt" value="<{$setting.small_pic2_txt}>" class="x-input"></td>
          </tr>
		  <tr>
            <th><{t app='topc'}>商品价格：<{/t}></th>
            <td><input type="text" name="small_pic2_money" value="<{$setting.small_pic2_money}>" class="x-input"></td>
          </tr>
          <tr>
            <th><{t app='topc'}>图片链接：<{/t}></th>
            <td><input type="text" name="small_pic2_link" value="<{$setting.small_pic2_link}>" class="x-input"></td>
          </tr>
        </tbody>

		<tbody a=7>
          <tr>
            <th><{t app='topc'}>图片：<{/t}></th>
            <td>
              <input type="text" name='three_pic1' id="three_pic1" value="<{$setting.three_pic1}>" class="x-input"><input type=button value="<{t app='topc'}>上传图片<{/t}>" class="uploadbtn" onclick="addPic('three_pic1')"><span>（建议图片尺寸：199px * 210px）</span>
            </td>
          </tr>
          <tr>
            <th><{t app='topc'}>商品标题：<{/t}></th>
            <td><input type="text" name="three_pic_txt1" value="<{$setting.three_pic_txt1}>" class="x-input"></td>
          </tr>
		  <tr>
            <th><{t app='topc'}>商品价格：<{/t}></th>
            <td><input type="text" name="three_pic_money1" value="<{$setting.three_pic_money1}>" class="x-input"></td>
          </tr>
          <tr>
            <th><{t app='topc'}>图片链接：<{/t}></th>
            <td><input type="text" name="three_pic_link1" value="<{$setting.three_pic_link1}>" class="x-input"></td>
          </tr>
        </tbody>

		<tbody a=8>
          <tr>
            <th><{t app='topc'}>图片：<{/t}></th>
            <td>
              <input type="text" name='three_pic2' id="three_pic2" value="<{$setting.three_pic2}>" class="x-input"><input type=button value="<{t app='topc'}>上传图片<{/t}>" class="uploadbtn" onclick="addPic('three_pic2')"><span>（建议图片尺寸：199px * 210px）</span>
            </td>
          </tr>
          <tr>
            <th><{t app='topc'}>商品标题：<{/t}></th>
            <td><input type="text" name="three_pic_txt2" value="<{$setting.three_pic_txt2}>" class="x-input"></td>
          </tr>
		  <tr>
            <th><{t app='topc'}>商品价格：<{/t}></th>
            <td><input type="text" name="three_pic_money2" value="<{$setting.three_pic_money2}>" class="x-input"></td>
          </tr>
          <tr>
            <th><{t app='topc'}>图片链接：<{/t}></th>
            <td><input type="text" name="three_pic_link2" value="<{$setting.three_pic_link2}>" class="x-input"></td>
          </tr>
        </tbody>

		<tbody a=9>
          <tr>
            <th><{t app='topc'}>图片：<{/t}></th>
            <td>
              <input type="text" name='three_pic3' id="three_pic3" value="<{$setting.three_pic3}>" class="x-input"><input type=button value="<{t app='topc'}>上传图片<{/t}>" class="uploadbtn" onclick="addPic('three_pic3')"><span>（建议图片尺寸：199px * 210px）</span>
            </td>
          </tr>
          <tr>
            <th><{t app='topc'}>商品标题：<{/t}></th>
            <td><input type="text" name="three_pic_txt3" value="<{$setting.three_pic_txt3}>" class="x-input"></td>
          </tr>
		  <tr>
            <th><{t app='topc'}>商品价格：<{/t}></th>
            <td><input type="text" name="three_pic_money3" value="<{$setting.three_pic_money3}>" class="x-input"></td>
          </tr>
          <tr>
            <th><{t app='topc'}>图片链接：<{/t}></th>
            <td><input type="text" name="three_pic_link3" value="<{$setting.three_pic_link3}>" class="x-input"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script src="images/jquery.min.js"></script>
<script>
var jq = jQuery.noConflict();

//<{*}>var cat_json = <{$setting.cat_json}>;<{*}>

jq('#first_cat').on('change', function(){
	var opt = jq(this).val();
	if(opt == '') {
		jq('#star table tr').hide();
		return false;
	}
	jq('input[name=first_cat_name]').val(jq(this).find('option[value='+opt+']').val());
	jq('#star table tr').hide();
	jq('#star table tr[sec_cat_id=' + opt + ']').show();
});

jq('#featured table tbody').click(function (e) {
	resetArea();
	jq('#featured table tbody').css('background-color','#f4f4f4');
	jq(this).css('background-color','white');
	var index = jq(this).attr('a');
	selectArea2('div.featured-area-0'+index);
});

var checkAll = function (vvthis) {
	var title = '全选';
	var vthis = jq(vvthis);
	var vtitle = vthis.text();
	if(vtitle == title) {
		vthis.text('取消全选');
		vthis.parent().find('input[type=checkbox]').prop('checked', true);
	} else {
		vthis.text(title);
		vthis.parent().find('input[type=checkbox]').prop('checked', false);
	}
}



  function addPic(eleid){
    var goto_url=encodeURIComponent('<{url route="shopadmin" app="image" ctl="admin_manage" act="image_broswer" type="big"}>');
    var url='<{url route="shopadmin" app="desktop" act="alertpages" goto=""}>'+goto_url;
    Ex_Loader('modedialog',function(){
      return new imgDialog(url,{onCallback:function(image_id,image_src){
        $(eleid).value=image_src;
      }});
    });

  }

$('star').addEvent('click',function(){
  resetArea();
  clearBorder();
  selectArea('.star-area');
})
$('picAddress').addEvent('click',function(){
  resetArea();
  clearBorder();
  selectArea('.slider-area');
})
$('m_add').addEvent('click',function(){
  resetArea();
  clearBorder();
  selectArea('.featured-area-01');
})
$('featured').addEvent('click',function(){
  resetArea();
  //selectArea('.right-main-content');
})

function resetArea(){
  jq('div.select-area').css('background', '#ddd');
}
function selectArea(el){
  $$(el).setStyle('background', '#e0457e');
}

function selectArea2(el){
	jq('div.select-area').css('border', 'none');
	jq(el).css('border', '1px solid #e0457e');
}


function clearBorder(el){
	jq('div.select-area').css('border', 'none');
}



//tableform改变颜色
$$('.floor-content .tableform').addEvent('click',function(){
  $$('.floor-content .tableform').setStyle('border-color','#d9d9d9');
  $(this).setStyle('border-color','#d15e82');
})

</script>
